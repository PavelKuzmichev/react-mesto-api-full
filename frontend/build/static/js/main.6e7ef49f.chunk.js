(this.webpackJsonpmesto_react=this.webpackJsonpmesto_react||[]).push([[0],{19:function(e,t,n){},31:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),o=n(21),r=n.n(o),i=n(9),s=(n(19),n(25)),l=n(3),u=n(4),p=(n(31),n(0));var d=function(e){var t=e.email,n=e.onClick,a=e.loggedIn,o=c.a.useState(!0),r=Object(l.a)(o,2),s=r[0],d=r[1],j=c.a.useState(!1),m=Object(l.a)(j,2),b=m[0],h=m[1],_="header__link opacity header__link_visible";return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("header",{className:"header",children:[Object(p.jsx)("a",{target:"_self",href:"#",children:Object(p.jsx)("img",{src:"data:image/jpeg;base64,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",className:"header__logo",alt:"\u043b\u043e\u0433\u043e\u0442\u0438\u043f \u0441\u0430\u0439\u0442\u0430"})}),a&&Object(p.jsxs)("div",{className:"header__menu ".concat(s?"":"header__menu_visible"),children:[Object(p.jsx)("p",{className:"header__email_menu",children:t}),Object(p.jsx)(i.b,{to:"/sign-in",onClick:n,className:"header__link_menu",children:"\u0412\u044b\u0439\u0442\u0438"})]}),Object(p.jsx)("div",{className:"header__nav",children:Object(p.jsxs)(u.d,{children:[Object(p.jsx)(u.b,{path:"/sign-in",children:Object(p.jsx)(i.b,{to:"/sign-up",className:_,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})}),Object(p.jsx)(u.b,{path:"/sign-up",children:Object(p.jsx)(i.b,{to:"/sign-in",className:_,children:"\u0412\u043e\u0439\u0442\u0438"})}),Object(p.jsxs)(u.b,{path:"/",children:[Object(p.jsx)("button",{className:"button opacity header__button \n                ".concat(b?"header__button_close":"header__button_open"),onClick:function(){d(!s),h(!b)}}),Object(p.jsx)("p",{className:"header__email",children:t}),Object(p.jsx)(i.b,{to:"/sign-in",onClick:n,className:"header__link opacity",children:"\u0412\u044b\u0439\u0442\u0438"})]})]})})]})})};n(38);var j=function(){return Object(p.jsx)("footer",{className:"footer",children:Object(p.jsx)("p",{className:"footer__copyright",children:"\xa9 2021 Mesto Russia"})})},m=(n(39),c.a.createContext());n(40);var b=function(e){var t=e.onCardLike,n=e.onCardClick,a=e.onCardDelete,o=e.item,r=c.a.useContext(m),i=o.owner===r._id,s="".concat(i?"element__remove":"element__remove element__remove_clear"),l=o.likes.some((function(e){return e===r._id})),u="".concat(l?"element__like element__like_active":"element__like");return Object(p.jsxs)("div",{className:"element",children:[Object(p.jsx)("img",{className:"element__image",onClick:n,src:"".concat(o.link),alt:o.name}),Object(p.jsx)("h3",{className:"element__title",children:o.name}),Object(p.jsx)("h4",{className:"element__likeSum",children:o.likes.length}),Object(p.jsx)("button",{type:"button",className:u,onClick:function(){t(o)}}),Object(p.jsx)("button",{type:"button",className:s,onClick:function(){a(o)}})]})};var h=function(e){var t=e.onEditProfile,n=e.onEditAvatar,a=e.onAddPlace,o=e.onCardClick,r=e.cards,i=e.onCardLike,s=e.onCardDelete,l=c.a.useContext(m);return Object(p.jsxs)("div",{children:[Object(p.jsxs)("section",{className:"profile",children:[Object(p.jsx)("img",{className:"profile__avatarIcon",src:l.avatar,alt:"\u0430\u0432\u0430\u0442\u0430\u0440 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),Object(p.jsx)("div",{className:"profile__edit-avatar",onClick:n}),Object(p.jsxs)("div",{className:"profile__form",children:[Object(p.jsx)("h1",{name:"profileName",className:"profile__name",children:l.name}),Object(p.jsx)("p",{name:"profileAbout",className:"profile__about",children:l.about})]}),Object(p.jsx)("button",{type:"button",onClick:t,className:"profile__edit-button"}),Object(p.jsx)("button",{type:"button",onClick:a,className:"profile__add-button"})]}),Object(p.jsx)("section",{className:"elements",children:r.map((function(e){return Object(p.jsx)(b,{onCardLike:i,onCardClick:o,onCardDelete:s,item:e},e._id)}))})]})};n(41);var _=function(e){var t=e.isOpen,n=e.onClose,a=e.name,c=e.title,o=e.children;return Object(p.jsx)("div",{className:"popup popup_".concat(a," ").concat(t&&"popup_visible"),children:Object(p.jsxs)("div",{className:"popup__window popup__window_".concat(a),children:[Object(p.jsx)("h2",{className:"popup__title popup__title_".concat(a),children:c}),Object(p.jsx)("button",{type:"button",onClick:n,className:"popup__close-btn popup__close-btn_".concat(a)}),o]})})};n(42);var f=function(e){var t=e.card,n=e.onClose;return Object(p.jsx)("div",{className:"popup popup_zoom ".concat(t&&"popup_visible"),children:Object(p.jsxs)("div",{className:"popup__window popup__window-zoom",children:[Object(p.jsx)("img",{className:"popup__image-zoom",src:"".concat(null===t||void 0===t?void 0:t.target.src),alt:null===t||void 0===t?void 0:t.target.alt}),Object(p.jsxs)("h2",{className:"popup__title-zoom",children:[null===t||void 0===t?void 0:t.target.alt," "]}),Object(p.jsx)("button",{type:"button",onClick:n,className:"popup__close-btn popup__close-btn_zoom-image"})]})})},O=n(2),g=n(23),v=n(24),x=function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))},C=new(function(){function e(t){Object(g.a)(this,e),this._url=t.url,this._headers=t.headers}return Object(v.a)(e,[{key:"addAllCards",value:function(){var e=localStorage.getItem("token");return fetch("".concat(this._url,"/cards"),{headers:Object(O.a)(Object(O.a)({},this._headers),{},{authorization:"Bearer ".concat(e)})}).then(x)}},{key:"addCard",value:function(e){var t=e.name,n=e.link,a=localStorage.getItem("token");return fetch("".concat(this._url,"/cards"),{method:"POST",headers:Object(O.a)(Object(O.a)({},this._headers),{},{authorization:"Bearer ".concat(a)}),body:JSON.stringify({name:t,link:n})}).then(x)}},{key:"removeCard",value:function(e){var t=localStorage.getItem("token");return fetch("".concat(this._url,"/cards/").concat(e),{method:"DELETE",headers:Object(O.a)(Object(O.a)({},this._headers),{},{authorization:"Bearer ".concat(t)})}).then(x)}},{key:"changeLikeCardStatus",value:function(e,t){var n=localStorage.getItem("token");return fetch("".concat(this._url,"/cards/").concat(e,"/likes"),{method:"".concat(t?"DELETE":"PUT"),headers:Object(O.a)(Object(O.a)({},this._headers),{},{authorization:"Bearer ".concat(n)})}).then(x)}},{key:"likeCard",value:function(e){var t=localStorage.getItem("token");return fetch("".concat(this._url,"/cards/").concat(e,"/likes"),{method:"PUT",headers:Object(O.a)(Object(O.a)({},this._headers),{},{authorization:"Bearer ".concat(t)})}).then(x)}},{key:"disLikeCard",value:function(e){var t=localStorage.getItem("token");return fetch("".concat(this._url,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:Object(O.a)(Object(O.a)({},this._headers),{},{authorization:"Bearer ".concat(t)})}).then(x)}},{key:"addProfileInfo",value:function(){var e=localStorage.getItem("token");return fetch("".concat(this._url,"/users/me"),{headers:Object(O.a)(Object(O.a)({},this._headers),{},{authorization:"Bearer ".concat(e)})}).then(x)}},{key:"editProfileInfo",value:function(e){var t=localStorage.getItem("token");return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:Object(O.a)(Object(O.a)({},this._headers),{},{authorization:"Bearer ".concat(t)}),body:JSON.stringify({name:e.name,about:e.about})}).then(x)}},{key:"editAvatarIcon",value:function(e){var t=localStorage.getItem("token");return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:Object(O.a)(Object(O.a)({},this._headers),{},{authorization:"Bearer ".concat(t)}),body:JSON.stringify({avatar:e.avatar})}).then(x)}}]),e}())({url:"https://api.kuzpavel1985.nomoredomains.monster",headers:{"Content-Type":"application/json"}});n(43);var k=function(e){var t=e.isOpen,n=e.onClose,a=e.onUpdateUser,o=c.a.useContext(m);c.a.useEffect((function(){u(o.name),h(o.about)}),[o]);var r=c.a.useState(""),i=Object(l.a)(r,2),s=i[0],u=i[1],d=c.a.useState(""),j=Object(l.a)(d,2),b=j[0],h=j[1];function f(e){e.preventDefault(),a({name:s,about:b})}return Object(p.jsx)(_,{isOpen:t,onClose:n,onSubmit:f,name:"edit-profile",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",children:Object(p.jsxs)("form",{onSubmit:f,name:"subscribe-form-profile",className:"popup__form popup__form_area_editprofile",noValidate:!0,children:[Object(p.jsx)("input",{autoComplete:"off",required:!0,minLength:"2",maxLength:"40",type:"text",id:"name-card",placeholder:"\u0418\u043c\u044f",name:"name",className:"popup__input popup__input_form_name",value:s,onChange:function(e){u(e.target.value)}}),Object(p.jsx)("span",{id:"name-card-error",className:"popup__error popup__error_area_name"}),Object(p.jsx)("input",{autoComplete:"off",required:!0,minLength:"2",maxLength:"40",type:"text",id:"about-card",placeholder:"\u041e \u0441\u0435\u0431\u0435",name:"about",className:"popup__input popup__input_form_about",value:b,onChange:function(e){h(e.target.value)}}),Object(p.jsx)("span",{id:"about-card-error",className:"popup__error popup__error_area_about"}),Object(p.jsx)("button",{type:"submit",className:"popup__submit-btn popup__submit-btn_edit-profile",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})})};n(44);var N=function(e){var t=e.isOpen,n=e.onClose,a=e.onUpdateAvatar,o=c.a.useRef();function r(e){e.preventDefault(),a({avatar:"".concat(o.current.value)}),e.target.reset()}return Object(p.jsx)(_,{isOpen:t,onClose:n,onSubmit:r,name:"avatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",children:Object(p.jsxs)("form",{onSubmit:r,className:"popup__form popup__form_area_avatar",name:"avatar",children:[Object(p.jsx)("input",{ref:o,autoComplete:"off",required:!0,type:"url",id:"Link-Avatar",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0430\u0432\u0430\u0442\u0430\u0440",name:"link",className:"popup__input popup__input_form_avatar"}),Object(p.jsx)("span",{id:"Link-Avatar-error",className:"popup__error popup__error_area_avatar"}),Object(p.jsx)("button",{type:"submit",className:"popup__submit-btn popup__submit-btn_avatar",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})})};n(45);var A=function(e){var t=e.isOpen,n=e.onClose,a=e.onAddCard,o=c.a.useState(""),r=Object(l.a)(o,2),i=r[0],s=r[1],u=c.a.useState(""),d=Object(l.a)(u,2),j=d[0],m=d[1];function b(e){e.preventDefault(),a({name:i,link:j}),s(""),m("")}return Object(p.jsx)(_,{isOpen:t,onClose:n,onSubmit:b,name:"add-element",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",children:Object(p.jsxs)("form",{onSubmit:b,name:"subscribe-form-card",className:"popup__form popup__form_area_newcard",noValidate:!0,children:[Object(p.jsx)("input",{onChange:function(e){s(e.target.value)},autoComplete:"off",value:i,required:!0,minLength:"2",maxLength:"40",type:"text",id:"title-card",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",name:"name",className:"popup__input popup__input_form_title"}),Object(p.jsx)("span",{id:"title-card-error",className:"popup__error popup__error_area_title"}),Object(p.jsx)("input",{onChange:function(e){m(e.target.value)},autoComplete:"off",value:j,required:!0,type:"url",id:"link-card",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",name:"link",className:"popup__input popup__input_form_link"}),Object(p.jsx)("span",{id:"link-card-error",className:"popup__error popup__error_area_link"}),Object(p.jsx)("button",{type:"submit",className:"popup__submit-btn popup__submit-btn_add-element",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})})},S=n(26),y=function(e){var t=e.loggedIn,n=Object(S.a)(e,["loggedIn"]);return Object(p.jsx)(u.b,{children:function(){return t?Object(p.jsx)(u.b,Object(O.a)({},n)):Object(p.jsx)(u.a,{to:"/sign-in"})}})},E=n(11);var I=function(e){var t=e.title,n=e.children,a=e.text,c=e.onSubmit,o=e.link;return Object(p.jsxs)("div",{className:"auth",children:[Object(p.jsx)("h3",{className:"auth__title",children:t}),Object(p.jsx)("form",{className:"auth__form",action:"#",onSubmit:c,children:n}),Object(p.jsxs)("div",{className:"auth__info",children:[Object(p.jsx)("h4",{className:"auth__text",children:a}),o]})]})};var w=function(e){var t=e.type,n=e.placeholder,a=e.name,c=e.value,o=e.onChange;return Object(p.jsx)("input",{className:"auth__item",type:t,placeholder:n,value:c,name:a,onChange:o,required:!0})};var B=function(e){var t=e.classname,n=e.isDisabled,a=e.onClick,c=e.button;return Object(p.jsx)("button",{type:"submit",className:"button ".concat(t,"__button-submit ").concat(n?"popup__button-submit_disabled":""),disabled:n,children:a?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":c})};var L=function(e){var t=e.onLoggin,n=c.a.useState({email:"",password:""}),a=Object(l.a)(n,2),o=a[0],r=a[1];function i(e){var t=e.target,n=t.name,a=t.value;r(Object(O.a)(Object(O.a)({},o),{},Object(E.a)({},n,a)))}return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(I,{title:"\u0412\u0445\u043e\u0434",onSubmit:function(e){e.preventDefault();var n=o.email,a=o.password;n&&a&&t(n,a)},children:[Object(p.jsx)(w,{type:"email",placeholder:"Email",value:o.email,name:"email",onChange:i}),Object(p.jsx)(w,{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",value:o.password,name:"password",onChange:i}),Object(p.jsx)(B,{button:"\u0412\u043e\u0439\u0442\u0438",classname:"auth"})]})})};var D=function(e){var t=e.onRegister,n=c.a.useState({email:"",password:""}),a=Object(l.a)(n,2),o=a[0],r=a[1];function s(e){var t=e.target,n=t.name,a=t.value;r(Object(O.a)(Object(O.a)({},o),{},Object(E.a)({},n,a)))}return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(I,{title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",onSubmit:function(e){e.preventDefault();var n=o.email,a=o.password;t(n,a)},text:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",link:Object(p.jsx)(i.b,{className:"auth__link opacity",to:"/sign-in",children:"\u0412\u043e\u0439\u0442\u0438"}),children:[Object(p.jsx)(w,{type:"email",placeholder:"Email",value:o.email,name:"email",onChange:s}),Object(p.jsx)(w,{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",value:o.password,name:"password",onChange:s}),Object(p.jsx)(B,{button:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",classname:"auth"})]})})},P="https://api.kuzpavel1985.nomoredomains.monster",U=function(e){return e.ok?e.json():Promise.reject("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a: ".concat(e.status))},Y=n.p+"static/media/error.df8eddf6.svg",T=n.p+"static/media/success.1b6082f8.svg";var q=function(e){var t=e.isOpen,n=e.onClose,a=e.isSuccess,c=e.message;return Object(p.jsxs)(_,{name:"confirm",isOpen:t,onClose:n,children:[Object(p.jsx)("img",{className:"popup__image",src:a?T:Y,alt:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"}),Object(p.jsx)("p",{className:"popup__message",children:c})]})};var z=function(){var e=Object(u.g)(),t=c.a.useState(!1),n=Object(l.a)(t,2),a=n[0],o=n[1],r=c.a.useState({name:"",about:"",avatar:"",_id:""}),i=Object(l.a)(r,2),b=i[0],O=i[1],g=c.a.useState([]),v=Object(l.a)(g,2),x=v[0],S=v[1],E=c.a.useState(!1),I=Object(l.a)(E,2),w=I[0],B=I[1],Y=c.a.useState(!1),T=Object(l.a)(Y,2),z=T[0],M=T[1],J=c.a.useState(!1),W=Object(l.a)(J,2),X=W[0],G=W[1],F=c.a.useState(void 0),V=Object(l.a)(F,2),H=V[0],R=V[1];function Q(){M(!1),B(!1),G(!1),R(void 0),se(!1)}var Z=c.a.useState(!1),K=Object(l.a)(Z,2),$=K[0],ee=K[1],te=c.a.useState(""),ne=Object(l.a)(te,2),ae=ne[0],ce=ne[1],oe=c.a.useState(!1),re=Object(l.a)(oe,2),ie=re[0],se=re[1],le=c.a.useState(""),ue=Object(l.a)(le,2),pe=ue[0],de=ue[1];function je(){var t=localStorage.getItem("token");t&&function(e){return fetch("".concat(P,"/users/me"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return U(e)}))}(t).then((function(t){de(t.email),o(!0),e.push("/")})).catch((function(e){if(401===e)return console.log("\u0422\u043e\u043a\u0435\u043d \u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u0438\u043b\u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u043d\u0435 \u0432 \u0442\u043e\u043c \u0444\u043e\u0440\u043c\u0430\u0442\u0435")}))}return c.a.useEffect((function(){a&&C.addProfileInfo().then((function(e){O(e)})).catch((function(e){console.log(e)}))}),[a]),c.a.useEffect((function(){a&&C.addAllCards().then((function(e){S(e)})).catch((function(e){console.log(e)}))}),[a]),c.a.useEffect((function(){je()}),[]),Object(p.jsx)(m.Provider,{value:b,children:Object(p.jsx)("div",{className:"body",children:Object(p.jsxs)("div",{className:"page",children:[Object(p.jsx)(d,{email:pe,onClick:function(){localStorage.removeItem("token"),o(!1),e.push("/sign-in")},loggedIn:a}),Object(p.jsxs)(u.d,{children:[Object(p.jsx)(u.b,{path:"/sign-in",children:Object(p.jsx)(L,{onLoggin:function(t,n){(function(e,t){return fetch("".concat(P,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){return U(e)})).then((function(e){return localStorage.setItem("token",e.token),e}))})(t,n).then((function(n){n.token&&(de(t),o(!0),localStorage.setItem("token",n.token),e.push("/"))})).catch((function(e){return ce("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437"),se(!0),ee(!1),400===e?console.log("\u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439"):401===e?console.log("\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 email \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"):void 0}))}})}),Object(p.jsx)(u.b,{path:"/sign-up",children:Object(p.jsx)(D,{onRegister:function(t,n){(function(e,t){return fetch("".concat(P,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){return U(e)}))})(t,n).then((function(t){t&&(e.push("/sign-in"),se(!0),ee(!0),ce("\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!"))})).catch((function(e){if(ce("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437"),se(!0),ee(!1),400===e)return console.log("\u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439")}))}})}),Object(p.jsx)(y,{exact:!0,path:"/",loggedIn:a,children:Object(p.jsx)(h,{onEditProfile:function(){B(!0)},onEditAvatar:function(){G(!0)},onAddPlace:function(){M(!0)},onCardClick:function(e){R(e)},cards:x,onCardLike:function(e){var t=e.likes.some((function(e){return e===b._id}));C.changeLikeCardStatus(e._id,t).then((function(t){S((function(n){return n.map((function(n){return n._id===e._id?t:n}))}))})).catch((function(e){return console.log(e)}))},onCardDelete:function(e){C.removeCard(e._id).then((function(){S((function(t){return t.filter((function(t){return t._id!==e._id}))}))})).catch((function(e){return console.log(e)}))}})}),Object(p.jsx)(u.b,{children:a?Object(p.jsx)(u.a,{to:"/"}):Object(p.jsx)(u.a,{to:"/sign-in"})})]}),Object(p.jsx)(N,{isOpen:X,onClose:Q,onUpdateAvatar:function(e){var t=e.avatar;C.editAvatarIcon({avatar:t}).then((function(e){O(e)})).then((function(){return Q()})).catch((function(e){console.log(e)}))}}),Object(p.jsx)(k,{isOpen:w,onClose:Q,onUpdateUser:function(e){var t=e.name,n=e.about;C.editProfileInfo({name:t,about:n}).then((function(e){O(e)})).then((function(){return Q()})).catch((function(e){console.log(e)}))}}),Object(p.jsx)(A,{isOpen:z,onClose:Q,onAddCard:function(e){var t=e.name,n=e.link;C.addCard({name:t,link:n}).then((function(e){return S([e].concat(Object(s.a)(x)))})).then((function(){return Q()})).catch((function(e){console.log(e)}))}}),Object(p.jsx)(q,{isOpen:ie,isSuccess:$,message:ae,onClose:Q}),Object(p.jsx)(_,{name:"delete-confirm",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",children:Object(p.jsx)("form",{className:"popup__form popup__form_area_confirm",children:Object(p.jsx)("button",{type:"submit",className:"popup__submit-btn popup__submit-btn_delete-confirm",children:"\u0414\u0430"})})}),Object(p.jsx)(f,{card:H,onClose:Q}),Object(p.jsx)(j,{})]})})})},M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,47)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),o(e),r(e)}))};r.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(i.a,{children:Object(p.jsx)(z,{})})}),document.getElementById("root")),M()}},[[46,1,2]]]);
//# sourceMappingURL=main.6e7ef49f.chunk.js.map